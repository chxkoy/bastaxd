const fs = require('fs');
const pathUtil = require('path');
const prettifyJSON = require('../');


test('simple use', () => {
  const path = pathUtil.join(__dirname, 'fixture.json');
  let txt = fs.readFileSync(path, 'utf-8');
  const o = JSON.parse(txt);
  txt = txt.replace(/"([^"]+)":/g, '$1:');
  const json = prettifyJSON(o);
  expect(json).toBe(txt.trim());
});


test('quote keys', () => {
  const o = {
    name: 'prettify json',
    version: '1.0'
  };

  const json = prettifyJSON(o, { quoteKey: true });
  expect(json).toBe(`
{
  "name": "prettify json",
  "version": "1.0"
}
  `.trim());
});
